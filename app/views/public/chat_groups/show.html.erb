<h2><%= @recruitment.title %>のメッセージグループです</h2>

<% if @recruitment.user.id == current_user.id %>
<%= link_to "食事に行きました！", confirm_recruitment_chat_groups_path(@recruitment.id), method: :post %>
<% end %>

<h4>参加者</h4>
<div class="d-flex flex-row">
    <% @chat_group_users.each do |chat_group_user| %>
      <div class="d-flex flex-column">
        <% if chat_group_user.user.image.attached? %>
            <p><%= image_tag chat_group_user.user.image, size: "80x80" %></p>
        <% else %>
            <p><%= image_tag 'no_image', size: "80x80" %></p>
        <% end %>
            <p><%= link_to chat_group_user.user.nickname, user_path(chat_group_user.user.id) %></p>
      </div>
    <% end %>
</div>

<div class="d-flex flex-row">
    <%= form_with model: @chat, url: chats_path, method: :create do |chat| %>
        <p><%= chat.text_area :chat %></p>
        <p><%= chat.hidden_field :chat_group_id, :value => @chat_group.id %></p>
        <p><%= chat.submit "送信" %></p>
    <% end %>
</div>


<div class="d-flex flex-row">
    <% @chats.each do |chat| %>
      <div>
        <% if chat.user.image.attached? %>
            <p><%= image_tag chat.user.image, size: "80x80" %></p>
        <% else %>
            <p><%= image_tag 'no_image', size: "80x80" %></p>
        <% end %> 
            <p><%= chat.user.nickname %></p>
      </div>
      <div>
            <p><%= chat.chat %></p>
      </div>
    <% end %>
    <%= paginate @chat_pages %>
</div>




<!--<script>-->
<!--  $(document).on('turbolinks:load', function() {-->
    <!--$('.jscroll-div').jscroll({ // 追加したdivのclass名と合わせる-->
<!--      contentSelector: '.jscroll', -->
      <!--nextSelector: '.next a',  // 次ページリンクのセレクタ-->
<!--      loadingHtml: '読み込み中',-->
<!--      padding: 10-->
<!--    });-->
<!--  });-->
<!--</script>-->

<!--<style>-->
<!--  .pagination {-->
<!--    visibility: hidden;-->
<!--  }-->
<!--</style>-->